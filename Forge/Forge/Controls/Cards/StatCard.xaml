<?xml version="1.0" encoding="utf-8" ?>
<ContentView
    x:Class="Forge.Controls.Cards.StatCard"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:res="clr-namespace:Forge.Resources.Strings">

    <Frame Padding="16">
        <VerticalStackLayout Spacing="8">

            <Label Text="{Binding Title}"
                   FontSize="18"
                   TextColor="{StaticResource Accent}" />

            <Grid 
                ColumnDefinitions="Auto,*"
                RowDefinitions="Auto"
                Margin="0,8,0,12"
                ColumnSpacing="12">

                <!-- Level badge -->
                <Frame 
                    Grid.Column="0"
                    WidthRequest="64"
                    HeightRequest="64"
                    CornerRadius="32"
                    Padding="0"
                    HasShadow="False"
                    BackgroundColor="{StaticResource Accent}">
                    <VerticalStackLayout 
                        Spacing="0"
                        HorizontalOptions="Center"
                        VerticalOptions="Center">
                        <Label 
                            Text="{Binding Level}"
                            FontSize="28"
                            FontAttributes="Bold"
                            TextColor="White"
                            HorizontalOptions="Center" />
                        <Label 
                            Text="{x:Static res:AppResources.StatCard_lvl}"
                            FontSize="10"
                            TextColor="White"
                            Opacity="0.85"
                            HorizontalOptions="Center" />
                    </VerticalStackLayout>
                </Frame>
                
                <!-- XP pill -->
                <Frame
                    Grid.Column="1"
                    Grid.Row="0"
                    Padding="12,10"
                    CornerRadius="12"
                    HasShadow="False"
                    BackgroundColor="{AppThemeBinding Light=#F3F4F6, Dark=#1F2430}">
                    <!-- Overlay the label on top of the bar -->
                    <Grid>
                        <ProgressBar
                            Progress="{Binding XpProgress}"
                            HeightRequest="10"
                            VerticalOptions="Center"
                            ProgressColor="{StaticResource Aether}"
                            BackgroundColor="{AppThemeBinding Light=#E5E7EB, Dark=#2A3140}" />
                        <!--Progress="{Binding XpProgress}" Insert above!-->

                        <Label
                            Text="{Binding Xp, StringFormat='{}{0} XP'}"
                            FontSize="14"
                            TextColor="{StaticResource Accent}"
                            FontAttributes="Bold"
                            HorizontalOptions="Center"
                            VerticalOptions="Center" />
                    </Grid>
                </Frame>
            </Grid>

            <Grid 
                ColumnDefinitions="*,*,*">
                <VerticalStackLayout
                    Grid.Column="0"
                    Spacing="2"
                    HorizontalOptions="Center">
                    <Label 
                        Text="Strength"
                        FontSize="16" 
                        TextColor="{StaticResource Muted}" />
                    <Label 
                        Text="{Binding Strength}"
                        FontAttributes="Bold"
                        FontSize="20" />
                </VerticalStackLayout>

                <VerticalStackLayout
                    Grid.Column="1"
                    Spacing="2" 
                    HorizontalOptions="Center">
                    <Label
                        Text="Dexterity"
                        FontSize="16" 
                        TextColor="{StaticResource Muted}" />
                    <Label
                        Text="{Binding Dexterity}"
                        FontAttributes="Bold"
                        FontSize="20" />
                </VerticalStackLayout>

                <VerticalStackLayout
                    Grid.Column="2" 
                    Spacing="2" 
                    HorizontalOptions="Center">
                    <Label 
                        Text="Constitution" 
                        FontSize="16" 
                        TextColor="{StaticResource Muted}" />
                    <Label
                        Text="{Binding Constitution}"
                        FontAttributes="Bold"
                        FontSize="20" />
                </VerticalStackLayout>
            </Grid>
        </VerticalStackLayout>
    </Frame>
</ContentView>
